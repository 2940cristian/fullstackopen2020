(this.webpackJsonpthephonebook=this.webpackJsonpthephonebook||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},21:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(15),s=n.n(o),c=(n(21),n(3)),u=function(e){var t=e.statesNeeded,n=function(e){t.setCheckPerson(e.target.value);var n=t.persons.filter((function(e){return e.name.toLowerCase().includes(t.checkPerson.toLowerCase())}));t.setFilteredPersons(n)};return a.a.createElement("input",{onKeyDown:function(e){return 8===e.keyCode?n:null},onChange:n,type:"text"})},i=n(2),l=n.n(i),m=n(4),d=n(5),h=n.n(d),p="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"http://localhost:3001/persons":"https://polar-ridge-80491.herokuapp.com/api/persons",f=function(e){return h.a.post(p,e)},w=function(){return h.a.get(p)},b=function(e){return h.a.delete("".concat(p,"/").concat(e))},v=function(e,t){return h.a.put("".concat(p,"/").concat(e),t)},N=function(e){var t=e.statesNeeded,n=function(e,t){e(t.target.value)},r=function(){var e=Object(m.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:return r=e.sent,e.next=5,t.setPersons(r.data);case 5:e.sent,t.setNewNumber(""),t.setNewName(""),t.setSuccessMessage(n),t.setIsShown(!t.shown),setTimeout((function(){t.setIsShown(t.shown)}),3e3);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function o(){return(o=Object(m.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a={name:t.newName,number:t.newNumber},!t.persons.some((function(e){return e.name.toLowerCase()===a.name.toLowerCase()}))){e.next=7;break}return e.abrupt("return",s(a));case 7:return e.next=9,f(a);case 9:e.sent,r("".concat(t.newName," has been aadded to phonebook"));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var s=function(){var e=Object(m.a)(l.a.mark((function e(n){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("".concat(n.name," already exists, would you like to change the number?"))){e.next=7;break}return a=t.persons.find((function(e){return e.name.toLowerCase()===t.newName})),e.next=4,v(a.id,n).then((function(e){return!0})).catch((function(e){return!1}));case 4:o=e.sent,console.log(o),o?r("".concat(n.name,"'s number has been changed")):(t.setSuccessMessage("error, ".concat(n.name," has already been deleted")),t.setIsShown(!t.shown),setTimeout((function(){t.setIsShown(t.shown)}),3e3));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:function(e){return o.apply(this,arguments)}},a.a.createElement("div",null,a.a.createElement("h2",null,"Add A New"),"name: ",a.a.createElement("input",{required:!0,type:"text",onChange:function(e){n(t.setNewName,e)},value:t.newName}),"number: ",a.a.createElement("input",{required:!0,type:"number",onChange:function(e){n(t.setNewNumber,e)},value:t.newNumber})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},g=function(e){var t=e.id,n=e.stateNeeded;function r(){return(r=Object(m.a)(l.a.mark((function e(t){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you want to delete this person?")){e.next=10;break}return e.next=3,b(t);case 3:return r=e.sent,e.next=6,w();case 6:return a=e.sent,e.abrupt("return",r&n(a.data));case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.createElement("button",{onClick:function(){!function(e){r.apply(this,arguments)}(t)},style:{marginLeft:"1rem",height:"fit-content"}},"Delete")},k=function(e){var t=e.statesNeeded;return a.a.createElement("div",null,a.a.createElement("h2",null,"Numbers"),t.checkPerson.length<1?t.persons.map((function(e){return a.a.createElement("div",{key:e.name,style:{display:"flex",alignItems:"center"}},a.a.createElement("p",null,e.name," ",e.number),a.a.createElement(g,{stateNeeded:t.setPersons,id:e.id}))})):t.filteredPersons.map((function(e){return a.a.createElement("p",{key:e.name},e.name," ",e.number)})))},E=function(e){return a.a.createElement("div",{style:{color:"green",backgroundColor:"#D3D3D3",width:"80vw",margin:"1rem auto",border:"1px solid green"}},a.a.createElement("p",{style:{margin:".4rem"}},e.message))},y=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(r.useState)([]),i=Object(c.a)(s,2),l=i[0],m=i[1],d=Object(r.useState)(""),h=Object(c.a)(d,2),p=h[0],f=h[1],b=Object(r.useState)(""),v=Object(c.a)(b,2),g=v[0],y=v[1],j=Object(r.useState)(""),x=Object(c.a)(j,2),O=x[0],S=x[1],P=Object(r.useState)("Yay"),C=Object(c.a)(P,2),D=C[0],I=C[1],L=Object(r.useState)(!1),M=Object(c.a)(L,2),q=M[0],A=M[1];return Object(r.useEffect)((function(){w().then((function(e){o(e.data)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),q?a.a.createElement(E,{message:D}):null,a.a.createElement(u,{statesNeeded:{setCheckPerson:f,persons:n,checkPerson:p,setFilteredPersons:m}}),a.a.createElement(N,{statesNeeded:{persons:n,setPersons:o,setNewName:y,newName:g,setNewNumber:S,newNumber:O,setSuccessMessage:I,isShown:q,setIsShown:A}}),a.a.createElement(k,{statesNeeded:{checkPerson:p,persons:n,filteredPersons:l,setPersons:o}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.3fc1f027.chunk.js.map